<!DOCTYPE html>
<html>
<body>
    
    <progress value="0" max="100" id="uploader">0%</progress>
    <input type="file" value="upload" id="fileButton"/>
    
    <script src="https://www.gstatic.com/firebasejs/3.8.0/firebase.js"></script>
        <script>
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyALh9SrPLPXUJuRW2dVtR_dKVvQXDhmRS0",
            authDomain: "suva-6c5b6.firebaseapp.com",
            databaseURL: "https://suva-6c5b6.firebaseio.com",
            projectId: "suva-6c5b6",
            storageBucket: "suva-6c5b6.appspot.com",
            messagingSenderId: "69179275064"
          };
          firebase.initializeApp(config);
        </script>
    
    <script>
        var provider = new firebase.auth.GoogleAuthProvider();
        function signInToGoogle() {
            firebase.auth().signInWithRedirect(provider);
        }
        function signOutFromGoogle() {
            firebase.auth().signOut().then(function() {
              // Sign-out successful.
            }).catch(function(error) {
              // An error happened.
            }); 
        }
    </script>
    
    <script>
        var uploader = document.getElementById('uploader');
        var fileButton = document.getElementById('fileButton');
        
        fileButton.addEventListener('change', function(e){
            var file = e.target.files[0];
            
            var storageRef = firebase.storage().ref('maps/' + file.name);
            
            var task = storageRef.put(file);
            
            task.on('state_changed',
                   function progress(snapshot) {
                        var percentage = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                        uploader.value = percentage;
            },
                function error(err){
                
            },
                function complete(){
                
            }
               );
        });
    </script>
    <button onclick="writeTrackName()">Raja nimi</button>
    <input type="text" id="tekst" placeholder="Raja nimi">
    <script>
        function writeTrackName() {
            var test = document.getElementById('tekst').value;
          firebase.database().ref('tracks').set({
            username: test
          });
        }
    </script>
    
    <button onclick="writeTrackInfo()">Raja info</button>
    <input type="text" id="rada" placeholder="Raja nimi">
    <input type="text" id="linn" placeholder="Linn">
    <input type="text" id="kaart" placeholder="Kaardi nimi">
    <script>
        function writeTrackName() {
            var rada = document.getElementById('rada').value;
            var linn = document.getElementById('linn').value;
            var kaart = document.getElementById('kaart').value;
          firebase.database().ref('tracks/' + rada).set({
            city: linn,
            map: kaart
          });
        }
    </script>
    
    <button onclick="signInToGoogle()">Sign in</button>
    <button onclick="signOutFromGoogle()">Sign out</button>
    




</body>
</html>